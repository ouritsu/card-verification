{"version":3,"sources":["cardsData.js","checkCardNumber.js"],"names":["cardsData","visa","name","lengths","beginings","masterCard","americanExpress","checkCardNumber","inputUserNumber","inputValueToCalculation","prepareInputValueToCalculation","isValidLuhnAlgorithm","checkLuhnAlgorithm","cardCompany","checkCardCompany","invalidInputValue","userNumberArrayDigitals","match","reverse","sum","forEach","number","index","digit","parseInt","calculateValue","calculateValueGreaterThan10","value","separateDigits","String","split","reduce","nextDigit","console","log","cardNumber","finalResult","Object","keys","company","lengthCondition","checkLength","beginingCondition","checkBegining","result","length","firstNumbers","startsWith"],"mappings":"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","file":"checkCardNumber.682a5a17.js","sourceRoot":"..","sourcesContent":["const cardsData = {\r\n  visa: {\r\n    name: 'Visa',\r\n    lengths: [13, 16],\r\n    beginings: [4],\r\n  },\r\n  masterCard: {\r\n    name: 'Master Card',\r\n    lengths: [16],\r\n    beginings: [51, 52, 53, 54, 55]\r\n  },\r\n  americanExpress: {\r\n    name: 'American Express',\r\n    lengths: [15],\r\n    beginings: [34, 37]\r\n  }\r\n}\r\n\r\nexport {\r\n  cardsData\r\n};","import {\r\n  cardsData\r\n} from \"./cardsData\"\r\n\r\nconst checkCardNumber = (inputUserNumber) => {\r\n  const inputValueToCalculation = prepareInputValueToCalculation(inputUserNumber);\r\n  const isValidLuhnAlgorithm = checkLuhnAlgorithm(inputValueToCalculation);\r\n  const cardCompany = checkCardCompany(inputUserNumber);\r\n  if (isValidLuhnAlgorithm && cardCompany) {\r\n    return cardCompany;\r\n  } else {\r\n    invalidInputValue();\r\n  }\r\n}\r\n\r\nfunction prepareInputValueToCalculation(inputUserNumber) {\r\n  const userNumberArrayDigitals = inputUserNumber.match(/[0-9]/g);\r\n  return userNumberArrayDigitals.reverse();\r\n}\r\n\r\nfunction checkLuhnAlgorithm(inputValueToCalculation) {\r\n  let sum = 0;\r\n\r\n  inputValueToCalculation.forEach((number, index) => { //Luhn's algorithm - refactoring reduce ?\r\n    const digit = parseInt(number);\r\n    if (index % 2) {\r\n      let calculateValue = digit * 2\r\n      sum += calculateValue < 10 ? calculateValue : calculateValueGreaterThan10(calculateValue)\r\n    } else {\r\n      sum += digit;\r\n    }\r\n  })\r\n  return sum % 10 === 0 ? true : false;\r\n}\r\n\r\nfunction calculateValueGreaterThan10(value) {\r\n  const separateDigits = String(value).split('');\r\n  return separateDigits.reduce((sum, nextDigit) => sum + parseInt(nextDigit), 0);\r\n}\r\n\r\nfunction invalidInputValue() {\r\n  //Error - create new Error\r\n  console.log('Invalid number, try again!')\r\n}\r\n\r\nfunction checkCardCompany(cardNumber) {\r\n  let finalResult = \"\";\r\n  for (const company of Object.keys(cardsData)) {\r\n    const lengthCondition = checkLength(cardNumber, company);\r\n    const beginingCondition = checkBegining(cardNumber, company);\r\n    if (lengthCondition && beginingCondition) {\r\n      finalResult = company;\r\n    }\r\n  }\r\n  return finalResult;\r\n}\r\n\r\nfunction checkLength(cardNumber, company) { //czy da się krócej? - może predykaty\r\n  let result = false;\r\n\r\n  for (const length of cardsData[company].lengths) {\r\n    if (cardNumber.length === length) {\r\n      result = true;\r\n      break;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction checkBegining(cardNumber, company) { //czy da się krócej?\r\n  let result = false;\r\n\r\n  for (const firstNumbers of cardsData[company].beginings) {\r\n    if (cardNumber.startsWith(firstNumbers)) {\r\n      result = true;\r\n      break;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nexport {\r\n  checkCardNumber\r\n};"]}